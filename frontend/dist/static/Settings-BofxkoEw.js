import{V as n,m as r,n as o,r as c}from"./index-BCeMOe0T.js";import{C as d}from"./CodeEditor-BbUcBhHA.js";import{C as p}from"./CopyText-Da2spgK4.js";const u=n.extend({components:{"code-editor":d},props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form,tab:0}},mounted(){this.tab=this.$utils.getPref("settings.apperanceTab")||0},watch:{tab(s){this.$utils.setPref("settings.apperanceTab",s)}},computed:{...r(["settings"])}});var m=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"items"},[t("b-tabs",{attrs:{animated:!1},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("b-tab-item",{attrs:{label:e.$t("settings.appearance.adminName"),"label-position":"on-border"}},[t("div",{staticClass:"block"},[e._v(" "+e._s(e.$t("settings.appearance.adminHelp"))+" ")]),t("b-field",{attrs:{label:e.$t("settings.appearance.customCSS"),"label-position":"on-border"}},[t("code-editor",{key:"editor-admin-css",attrs:{lang:"css",name:"body"},model:{value:e.data["appearance.admin.custom_css"],callback:function(a){e.$set(e.data,"appearance.admin.custom_css",a)},expression:"data['appearance.admin.custom_css']"}})],1),t("b-field",{attrs:{label:e.$t("settings.appearance.customJS"),"label-position":"on-border"}},[t("code-editor",{key:"editor-admin-js",attrs:{lang:"javascript",name:"body"},model:{value:e.data["appearance.admin.custom_js"],callback:function(a){e.$set(e.data,"appearance.admin.custom_js",a)},expression:"data['appearance.admin.custom_js']"}})],1)],1),t("b-tab-item",{attrs:{label:e.$t("settings.appearance.publicName"),"label-position":"on-border"}},[t("div",{staticClass:"block"},[e._v(" "+e._s(e.$t("settings.appearance.publicHelp"))+" ")]),t("b-field",{attrs:{label:e.$t("settings.appearance.customCSS"),"label-position":"on-border"}},[t("code-editor",{key:"editor-public-css",attrs:{lang:"css",name:"body"},model:{value:e.data["appearance.public.custom_css"],callback:function(a){e.$set(e.data,"appearance.public.custom_css",a)},expression:"data['appearance.public.custom_css']"}})],1),t("b-field",{attrs:{label:e.$t("settings.appearance.customJS"),"label-position":"on-border"}},[t("code-editor",{key:"editor-public-js",attrs:{lang:"javascript",name:"body"},model:{value:e.data["appearance.public.custom_js"],callback:function(a){e.$set(e.data,"appearance.public.custom_js",a)},expression:"data['appearance.public.custom_js']"}})],1)],1)],1)],1)},b=[],_=o(u,m,b);const g=_.exports,v=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{bounceTypes:["soft","hard","complaint"],data:this.form,regDuration:c}},methods:{removeBounceBox(s){this.data["bounce.mailboxes"].splice(s,1)}}});var f=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{staticClass:"columns mb-6"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.bounces.enable"),"data-cy":"btn-enable-bounce"}},[t("b-switch",{attrs:{name:"bounce.enabled"},model:{value:e.data["bounce.enabled"],callback:function(a){e.$set(e.data,"bounce.enabled",a)},expression:"data['bounce.enabled']"}})],1)],1),t("div",{staticClass:"column"},e._l(e.bounceTypes,function(a){return t("div",{key:a,staticClass:"columns"},[t("div",{staticClass:"column is-2",class:{disabled:!e.data["bounce.enabled"]},attrs:{label:e.$t("settings.bounces.count"),"label-position":"on-border"}},[e._v(" "+e._s(e.$t(`bounces.${a}`))+" ")]),t("div",{staticClass:"column is-4",class:{disabled:!e.data["bounce.enabled"]}},[t("b-field",{attrs:{label:e.$t("settings.bounces.count"),"label-position":"on-border",message:e.$t("settings.bounces.countHelp"),"data-cy":"btn-bounce-count"}},[t("b-numberinput",{attrs:{name:"bounce.count",type:"is-light","controls-position":"compact",placeholder:"3",min:"1",max:"1000"},model:{value:e.data["bounce.actions"][a].count,callback:function(i){e.$set(e.data["bounce.actions"][a],"count",i)},expression:"data['bounce.actions'][typ]['count']"}})],1)],1),t("div",{staticClass:"column is-4",class:{disabled:!e.data["bounce.enabled"]}},[t("b-field",{attrs:{label:e.$t("settings.bounces.action"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"bounce.action",expanded:""},model:{value:e.data["bounce.actions"][a].action,callback:function(i){e.$set(e.data["bounce.actions"][a],"action",i)},expression:"data['bounce.actions'][typ]['action']"}},[t("option",{attrs:{value:"none"}},[e._v(" "+e._s(e.$t("globals.terms.none"))+" ")]),t("option",{attrs:{value:"unsubscribe"}},[e._v(" "+e._s(e.$t("email.unsub"))+" ")]),t("option",{attrs:{value:"blocklist"}},[e._v(" "+e._s(e.$t("settings.bounces.blocklist"))+" ")]),t("option",{attrs:{value:"delete"}},[e._v(" "+e._s(e.$t("globals.buttons.delete"))+" ")])])],1)],1)])}),0)]),t("div",{staticClass:"mb-6"},[t("b-field",{attrs:{label:e.$t("settings.bounces.enableWebhooks"),"data-cy":"btn-enable-bounce-webhook"}},[t("b-switch",{attrs:{disabled:!e.data["bounce.enabled"],name:"webhooks_enabled","native-value":!0,"data-cy":"btn-enable-bounce-webhook"},model:{value:e.data["bounce.webhooks_enabled"],callback:function(a){e.$set(e.data,"bounce.webhooks_enabled",a)},expression:"data['bounce.webhooks_enabled']"}}),t("p",{staticClass:"has-text-grey"},[t("a",{attrs:{href:"https://listmonk.app/docs/bounces",target:"_blank",rel:"noopener noreferer"}},[e._v(e._s(e.$t("globals.buttons.learnMore"))+" â†’")])])],1),e.data["bounce.webhooks_enabled"]?t("div",{staticClass:"box"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.bounces.enableSES")}},[t("b-switch",{attrs:{name:"ses_enabled","native-value":!0,"data-cy":"btn-enable-bounce-ses"},model:{value:e.data["bounce.ses_enabled"],callback:function(a){e.$set(e.data,"bounce.ses_enabled",a)},expression:"data['bounce.ses_enabled']"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.bounces.enableSendgrid")}},[t("b-switch",{attrs:{name:"sendgrid_enabled","native-value":!0,"data-cy":"btn-enable-bounce-sendgrid"},model:{value:e.data["bounce.sendgrid_enabled"],callback:function(a){e.$set(e.data,"bounce.sendgrid_enabled",a)},expression:"data['bounce.sendgrid_enabled']"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.bounces.sendgridKey"),message:e.$t("globals.messages.passwordChange")}},[t("b-input",{attrs:{type:"password",disabled:!e.data["bounce.sendgrid_enabled"],name:"sendgrid_enabled","native-value":!0,"data-cy":"btn-enable-bounce-sendgrid"},model:{value:e.data["bounce.sendgrid_key"],callback:function(a){e.$set(e.data,"bounce.sendgrid_key",a)},expression:"data['bounce.sendgrid_key']"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.bounces.enablePostmark")}},[t("b-switch",{attrs:{name:"postmark_enabled","native-value":!0,"data-cy":"btn-enable-bounce-postmark"},model:{value:e.data["bounce.postmark"].enabled,callback:function(a){e.$set(e.data["bounce.postmark"],"enabled",a)},expression:"data['bounce.postmark'].enabled"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.bounces.postmarkUsername"),message:e.$t("settings.bounces.postmarkUsernameHelp")}},[t("b-input",{attrs:{type:"text",disabled:!e.data["bounce.postmark"].enabled,name:"postmark_username","data-cy":"btn-enable-bounce-postmark"},model:{value:e.data["bounce.postmark"].username,callback:function(a){e.$set(e.data["bounce.postmark"],"username",a)},expression:"data['bounce.postmark'].username"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.bounces.postmarkPassword"),message:e.$t("globals.messages.passwordChange")}},[t("b-input",{attrs:{type:"password",disabled:!e.data["bounce.postmark"].enabled,name:"postmark_password","data-cy":"btn-enable-bounce-postmark"},model:{value:e.data["bounce.postmark"].password,callback:function(a){e.$set(e.data["bounce.postmark"],"password",a)},expression:"data['bounce.postmark'].password"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.bounces.enableForwardemail")}},[t("b-switch",{attrs:{name:"forwardemail_enabled","native-value":!0,"data-cy":"btn-enable-bounce-forwardemail"},model:{value:e.data["bounce.forwardemail"].enabled,callback:function(a){e.$set(e.data["bounce.forwardemail"],"enabled",a)},expression:"data['bounce.forwardemail'].enabled"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.bounces.forwardemailKey"),message:e.$t("globals.messages.passwordChange")}},[t("b-input",{attrs:{type:"password",disabled:!e.data["bounce.forwardemail"].enabled,name:"forwardemail_enabled","native-value":!0,"data-cy":"btn-enable-bounce-forwardemail"},model:{value:e.data["bounce.forwardemail"].key,callback:function(a){e.$set(e.data["bounce.forwardemail"],"key",a)},expression:"data['bounce.forwardemail'].key"}})],1)],1)])]):e._e()],1),t("b-field",{attrs:{label:e.$t("settings.bounces.enableMailbox")}},[e.data["bounce.mailboxes"]?t("b-switch",{attrs:{disabled:!e.data["bounce.enabled"],name:"enabled","native-value":!0,"data-cy":"btn-enable-bounce-mailbox"},model:{value:e.data["bounce.mailboxes"][0].enabled,callback:function(a){e.$set(e.data["bounce.mailboxes"][0],"enabled",a)},expression:"data['bounce.mailboxes'][0].enabled"}}):e._e()],1),e.data["bounce.enabled"]&&e.data["bounce.mailboxes"][0].enabled?e._l(e.data["bounce.mailboxes"],function(a,i){return t("div",{key:i,staticClass:"block box"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column",class:{disabled:!a.enabled}},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.bounces.type"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"type"},model:{value:a.type,callback:function(l){e.$set(a,"type",l)},expression:"item.type"}},[t("option",{attrs:{value:"pop"}},[e._v(" POP ")])])],1)],1),t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.host"),"label-position":"on-border",message:e.$t("settings.mailserver.hostHelp")}},[t("b-input",{attrs:{name:"host",placeholder:"bounce.yourmailserver.net",maxlength:200},model:{value:a.host,callback:function(l){e.$set(a,"host",l)},expression:"item.host"}})],1)],1),t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.port"),"label-position":"on-border",message:e.$t("settings.mailserver.portHelp")}},[t("b-numberinput",{attrs:{name:"port",type:"is-light","controls-position":"compact",placeholder:"25",min:"1",max:"65535"},model:{value:a.port,callback:function(l){e.$set(a,"port",l)},expression:"item.port"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.authProtocol"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"auth_protocol"},model:{value:a.auth_protocol,callback:function(l){e.$set(a,"auth_protocol",l)},expression:"item.auth_protocol"}},[t("option",{attrs:{value:"none"}},[e._v(" none ")]),a.type==="pop"?t("option",{attrs:{value:"userpass"}},[e._v(" userpass ")]):[t("option",{attrs:{value:"cram"}},[e._v(" cram ")]),t("option",{attrs:{value:"plain"}},[e._v(" plain ")]),t("option",{attrs:{value:"login"}},[e._v(" login ")])]],2)],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.mailserver.username"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{disabled:a.auth_protocol==="none",name:"username",placeholder:"mysmtp",maxlength:200},model:{value:a.username,callback:function(l){e.$set(a,"username",l)},expression:"item.username"}})],1),t("b-field",{attrs:{label:e.$t("settings.mailserver.password"),"label-position":"on-border",expanded:"",message:e.$t("settings.mailserver.passwordHelp")}},[t("b-input",{attrs:{disabled:a.auth_protocol==="none",name:"password",type:"password",placeholder:e.$t("settings.mailserver.passwordHelp"),maxlength:200},model:{value:a.password,callback:function(l){e.$set(a,"password",l)},expression:"item.password"}})],1)],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.mailserver.tls"),expanded:"",message:e.$t("settings.mailserver.tlsHelp")}},[t("b-switch",{attrs:{name:"item.tls_enabled"},model:{value:a.tls_enabled,callback:function(l){e.$set(a,"tls_enabled",l)},expression:"item.tls_enabled"}})],1),t("b-field",{attrs:{label:e.$t("settings.mailserver.skipTLS"),expanded:"",message:e.$t("settings.mailserver.skipTLSHelp")}},[t("b-switch",{attrs:{disabled:!a.tls_enabled,name:"item.tls_skip_verify"},model:{value:a.tls_skip_verify,callback:function(l){e.$set(a,"tls_skip_verify",l)},expression:"item.tls_skip_verify"}})],1)],1)],1),t("div",{staticClass:"column"}),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.bounces.scanInterval"),expanded:"","label-position":"on-border",message:e.$t("settings.bounces.scanIntervalHelp")}},[t("b-input",{attrs:{name:"scan_interval",placeholder:"15m",pattern:e.regDuration,maxlength:10},model:{value:a.scan_interval,callback:function(l){e.$set(a,"scan_interval",l)},expression:"item.scan_interval"}})],1)],1)])])])])}):e._e()],2)},h=[],y=o(v,f,h);const $=y.exports,k=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form}},computed:{...r(["serverConfig","loading"])}});var x=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"items"},[t("b-field",{attrs:{label:e.$t("settings.general.siteName"),"label-position":"on-border"}},[t("b-input",{attrs:{name:"app.site_name",label:e.$t("settings.general.siteName"),maxlength:300,required:""},model:{value:e.data["app.site_name"],callback:function(a){e.$set(e.data,"app.site_name",a)},expression:"data['app.site_name']"}})],1),t("b-field",{attrs:{label:e.$t("settings.general.rootURL"),"label-position":"on-border",message:e.$t("settings.general.rootURLHelp")}},[t("b-input",{attrs:{name:"app.root_url",placeholder:"https://listmonk.yoursite.com",maxlength:300,required:"",type:"url",pattern:"https?://.*"},model:{value:e.data["app.root_url"],callback:function(a){e.$set(e.data,"app.root_url",a)},expression:"data['app.root_url']"}})],1),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.general.logoURL"),"label-position":"on-border",message:e.$t("settings.general.logoURLHelp")}},[t("b-input",{attrs:{name:"app.logo_url",placeholder:"https://listmonk.yoursite.com/logo.png",maxlength:300,type:"url",pattern:"https?://.*"},model:{value:e.data["app.logo_url"],callback:function(a){e.$set(e.data,"app.logo_url",a)},expression:"data['app.logo_url']"}})],1)],1),t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.general.faviconURL"),"label-position":"on-border",message:e.$t("settings.general.faviconURLHelp")}},[t("b-input",{attrs:{name:"app.favicon_url",placeholder:"https://listmonk.yoursite.com/favicon.png",maxlength:300,type:"url",pattern:"https?://.*"},model:{value:e.data["app.favicon_url"],callback:function(a){e.$set(e.data,"app.favicon_url",a)},expression:"data['app.favicon_url']"}})],1)],1)]),t("hr"),t("b-field",{attrs:{label:e.$t("settings.general.fromEmail"),"label-position":"on-border",message:e.$t("settings.general.fromEmailHelp")}},[t("b-input",{attrs:{name:"app.from_email",placeholder:"Listmonk <noreply@listmonk.yoursite.com>",pattern:"((.+?)\\s)?<(.+?)@(.+?)>",maxlength:300},model:{value:e.data["app.from_email"],callback:function(a){e.$set(e.data,"app.from_email",a)},expression:"data['app.from_email']"}})],1),t("b-field",{attrs:{label:e.$t("settings.general.adminNotifEmails"),"label-position":"on-border",message:e.$t("settings.general.adminNotifEmailsHelp")}},[t("b-taginput",{attrs:{name:"app.notify_emails","before-adding":a=>a.match(/(.+?)@(.+?)/),placeholder:"you@yoursite.com"},model:{value:e.data["app.notify_emails"],callback:function(a){e.$set(e.data,"app.notify_emails",a)},expression:"data['app.notify_emails']"}})],1),t("hr"),t("div",[t("h2",{staticClass:"is-size-4 mb-5"},[e._v(" "+e._s(e.$tc("globals.terms.subscriptions",2))+" ")]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.general.enablePublicSubPage"),message:e.$t("settings.general.enablePublicSubPageHelp")}},[t("b-switch",{attrs:{name:"app.enable_public_subscription_page"},model:{value:e.data["app.enable_public_subscription_page"],callback:function(a){e.$set(e.data,"app.enable_public_subscription_page",a)},expression:"data['app.enable_public_subscription_page']"}})],1)],1),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.general.sendOptinConfirm"),message:e.$t("settings.general.sendOptinConfirmHelp")}},[t("b-switch",{attrs:{name:"app.send_optin_confirmation"},model:{value:e.data["app.send_optin_confirmation"],callback:function(a){e.$set(e.data,"app.send_optin_confirmation",a)},expression:"data['app.send_optin_confirmation']"}})],1)],1)])]),t("hr"),t("div",[t("h2",{staticClass:"is-size-4 mb-5"},[e._v(" "+e._s(e.$t("campaigns.archive"))+" ")]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.general.enablePublicArchive"),message:e.$t("settings.general.enablePublicArchiveHelp")}},[t("b-switch",{attrs:{name:"app.enable_public_archive"},model:{value:e.data["app.enable_public_archive"],callback:function(a){e.$set(e.data,"app.enable_public_archive",a)},expression:"data['app.enable_public_archive']"}})],1)],1),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.general.enablePublicArchiveRSSContent"),message:e.$t("settings.general.enablePublicArchiveRSSContentHelp")}},[t("b-switch",{attrs:{name:"app.enable_public_archive_rss_content"},model:{value:e.data["app.enable_public_archive_rss_content"],callback:function(a){e.$set(e.data,"app.enable_public_archive_rss_content",a)},expression:"data['app.enable_public_archive_rss_content']"}})],1)],1)])]),t("hr"),t("b-field",{attrs:{label:e.$t("settings.general.checkUpdates"),message:e.$t("settings.general.checkUpdatesHelp")}},[t("b-switch",{attrs:{name:"app.check_updates"},model:{value:e.data["app.check_updates"],callback:function(a){e.$set(e.data,"app.check_updates",a)},expression:"data['app.check_updates']"}})],1),t("hr"),t("b-field",{attrs:{label:e.$t("settings.general.language"),"label-position":"on-border",addons:!1}},[t("b-select",{attrs:{name:"app.lang"},model:{value:e.data["app.lang"],callback:function(a){e.$set(e.data,"app.lang",a)},expression:"data['app.lang']"}},e._l(e.serverConfig.langs,function(a){return t("option",{key:a.code,domProps:{value:a.code}},[e._v(" "+e._s(a.name)+" ")])}),0),t("p",{staticClass:"mt-2"},[t("a",{attrs:{href:"https://listmonk.app/docs/i18n/#additional-language-packs",target:"_blank",rel:"noopener noreferer"}},[e._v(e._s(e.$t("globals.buttons.more"))+" â†’")])])],1)],1)},w=[],C=o(k,x,w);const S=C.exports,H=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form,regDuration:c,extensions:[]}},methods:{onS3URLChange(){this.data["upload.s3.url"]!==""&&!this.data["upload.s3.url"].match(/amazonaws\.com/)||(this.data["upload.s3.url"]=`https://s3.${this.data["upload.s3.aws_default_region"]}.amazonaws.com`)}}});var T=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"items"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.media.provider"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"upload.provider"},model:{value:e.data["upload.provider"],callback:function(a){e.$set(e.data,"upload.provider",a)},expression:"data['upload.provider']"}},[t("option",{attrs:{value:"filesystem"}},[e._v(" filesystem ")]),t("option",{attrs:{value:"s3"}},[e._v(" s3 ")])])],1)],1),t("div",{staticClass:"column is-10"},[t("b-field",{attrs:{label:e.$t("settings.media.upload.extensions"),"label-position":"on-border",expanded:""}},[t("b-taginput",{attrs:{name:"tags",ellipsis:"",icon:"tag-outline",placeholder:"jpg, png, gif .."},model:{value:e.data["upload.extensions"],callback:function(a){e.$set(e.data,"upload.extensions",a)},expression:"data['upload.extensions']"}})],1)],1)]),t("hr"),e.data["upload.provider"]==="filesystem"?t("div",{staticClass:"block"},[t("b-field",{attrs:{label:e.$t("settings.media.upload.path"),"label-position":"on-border",message:e.$t("settings.media.upload.pathHelp")}},[t("b-input",{attrs:{name:"app.upload_path",placeholder:"/home/listmonk/uploads",maxlength:200,required:""},model:{value:e.data["upload.filesystem.upload_path"],callback:function(a){e.$set(e.data,"upload.filesystem.upload_path",a)},expression:"data['upload.filesystem.upload_path']"}})],1),t("b-field",{attrs:{label:e.$t("settings.media.upload.uri"),"label-position":"on-border",message:e.$t("settings.media.upload.uriHelp")}},[t("b-input",{attrs:{name:"app.upload_uri",placeholder:"/uploads",maxlength:200,required:"",pattern:"^\\/(.+?)"},model:{value:e.data["upload.filesystem.upload_uri"],callback:function(a){e.$set(e.data,"upload.filesystem.upload_uri",a)},expression:"data['upload.filesystem.upload_uri']"}})],1)],1):e._e(),e.data["upload.provider"]==="s3"?t("div",{staticClass:"block"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.media.s3.region"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{name:"upload.s3.aws_default_region",maxlength:200,placeholder:"ap-south-1"},on:{input:e.onS3URLChange},model:{value:e.data["upload.s3.aws_default_region"],callback:function(a){e.$set(e.data,"upload.s3.aws_default_region",a)},expression:"data['upload.s3.aws_default_region']"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.media.s3.key"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{name:"upload.s3.aws_access_key_id",maxlength:200},model:{value:e.data["upload.s3.aws_access_key_id"],callback:function(a){e.$set(e.data,"upload.s3.aws_access_key_id",a)},expression:"data['upload.s3.aws_access_key_id']"}})],1),t("b-field",{attrs:{label:e.$t("settings.media.s3.secret"),"label-position":"on-border",expanded:"",message:"Enter a value to change."}},[t("b-input",{attrs:{name:"upload.s3.aws_secret_access_key",type:"password",maxlength:200},model:{value:e.data["upload.s3.aws_secret_access_key"],callback:function(a){e.$set(e.data,"upload.s3.aws_secret_access_key",a)},expression:"data['upload.s3.aws_secret_access_key']"}})],1)],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.media.s3.bucketType"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"upload.s3.bucket_type",expanded:""},model:{value:e.data["upload.s3.bucket_type"],callback:function(a){e.$set(e.data,"upload.s3.bucket_type",a)},expression:"data['upload.s3.bucket_type']"}},[t("option",{attrs:{value:"private"}},[e._v(" "+e._s(e.$t("settings.media.s3.bucketTypePrivate"))+" ")]),t("option",{attrs:{value:"public"}},[e._v(" "+e._s(e.$t("settings.media.s3.bucketTypePublic"))+" ")])])],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.media.s3.bucket"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{name:"upload.s3.bucket",maxlength:200,placeholder:""},on:{input:e.onS3URLChange},model:{value:e.data["upload.s3.bucket"],callback:function(a){e.$set(e.data,"upload.s3.bucket",a)},expression:"data['upload.s3.bucket']"}})],1),t("b-field",{attrs:{label:e.$t("settings.media.s3.bucketPath"),"label-position":"on-border",message:e.$t("settings.media.s3.bucketPathHelp"),expanded:""}},[t("b-input",{attrs:{name:"upload.s3.bucket_path",maxlength:200,placeholder:"/"},model:{value:e.data["upload.s3.bucket_path"],callback:function(a){e.$set(e.data,"upload.s3.bucket_path",a)},expression:"data['upload.s3.bucket_path']"}})],1)],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.media.s3.uploadExpiry"),"label-position":"on-border",message:e.$t("settings.media.s3.uploadExpiryHelp"),expanded:""}},[t("b-input",{attrs:{name:"upload.s3.expiry",placeholder:"14d",pattern:e.regDuration,maxlength:10},model:{value:e.data["upload.s3.expiry"],callback:function(a){e.$set(e.data,"upload.s3.expiry",a)},expression:"data['upload.s3.expiry']"}})],1)],1),t("div",{staticClass:"column is-9"},[t("b-field",{attrs:{label:e.$t("settings.media.s3.url"),"label-position":"on-border",message:e.$t("settings.media.s3.urlHelp")}},[t("b-input",{attrs:{name:"upload.s3.url",disabled:!e.data["upload.s3.bucket"],required:"",placeholder:"https://s3.$region.amazonaws.com",maxlength:200,expanded:"",type:"url",pattern:"https?://.*"},model:{value:e.data["upload.s3.url"],callback:function(a){e.$set(e.data,"upload.s3.url",a)},expression:"data['upload.s3.url']"}})],1),t("b-field",{attrs:{label:e.$t("settings.media.s3.publicURL"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{message:e.$t("settings.media.s3.publicURLHelp"),name:"upload.s3.public_url",disabled:!e.data["upload.s3.bucket"],placeholder:"https://files.yourdomain.com",maxlength:200,type:"url",pattern:"https?://.*"},model:{value:e.data["upload.s3.public_url"],callback:function(a){e.$set(e.data,"upload.s3.public_url",a)},expression:"data['upload.s3.public_url']"}})],1)],1)])]):e._e()])},P=[],D=o(H,T,P);const R=D.exports,L=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form,regDuration:c}},methods:{addMessenger(){this.data.messengers.push({enabled:!0,root_url:"",name:"",username:"",password:"",max_conns:25,max_msg_retries:2,timeout:"5s"}),this.$nextTick(()=>{const s=document.querySelectorAll('.messengers input[name="name"]');s[s.length-1].focus()})},removeMessenger(s){this.data.messengers.splice(s,1)}}});var E=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{staticClass:"items messengers"},e._l(e.data.messengers,function(a,i){return t("div",{key:i,staticClass:"block box"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-2"},[t("b-field",{attrs:{label:e.$t("globals.buttons.enabled")}},[t("b-switch",{attrs:{name:"enabled","native-value":!0},model:{value:a.enabled,callback:function(l){e.$set(a,"enabled",l)},expression:"item.enabled"}})],1),t("b-field",[t("a",{staticClass:"is-size-7",attrs:{href:"#"},on:{click:function(l){l.preventDefault(),e.$utils.confirm(null,()=>e.removeMessenger(i))}}},[t("b-icon",{attrs:{icon:"trash-can-outline",size:"is-small"}}),e._v(" "+e._s(e.$t("globals.buttons.delete"))+" ")],1)])],1),t("div",{staticClass:"column",class:{disabled:!a.enabled}},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("globals.fields.name"),"label-position":"on-border",message:e.$t("settings.messengers.nameHelp")}},[t("b-input",{attrs:{name:"name",placeholder:"mymessenger",maxlength:200},model:{value:a.name,callback:function(l){e.$set(a,"name",l)},expression:"item.name"}})],1)],1),t("div",{staticClass:"column is-8"},[t("b-field",{attrs:{label:e.$t("settings.messengers.url"),"label-position":"on-border",message:e.$t("settings.messengers.urlHelp")}},[t("b-input",{attrs:{name:"root_url",placeholder:"https://postback.messenger.net/path",maxlength:200,expanded:"",type:"url",pattern:"https?://.*"},model:{value:a.root_url,callback:function(l){e.$set(a,"root_url",l)},expression:"item.root_url"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.messengers.username"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{name:"username",maxlength:200},model:{value:a.username,callback:function(l){e.$set(a,"username",l)},expression:"item.username"}})],1),t("b-field",{attrs:{label:e.$t("settings.messengers.password"),"label-position":"on-border",expanded:"",message:e.$t("globals.messages.passwordChange")}},[t("b-input",{attrs:{name:"password",type:"password",placeholder:e.$t("globals.messages.passwordChange"),maxlength:200},model:{value:a.password,callback:function(l){e.$set(a,"password",l)},expression:"item.password"}})],1)],1)],1)]),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.messengers.maxConns"),"label-position":"on-border",message:e.$t("settings.messengers.maxConnsHelp")}},[t("b-numberinput",{attrs:{name:"max_conns",type:"is-light","controls-position":"compact",placeholder:"25",min:"1",max:"65535"},model:{value:a.max_conns,callback:function(l){e.$set(a,"max_conns",l)},expression:"item.max_conns"}})],1)],1),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.messengers.retries"),"label-position":"on-border",message:e.$t("settings.messengers.retriesHelp")}},[t("b-numberinput",{attrs:{name:"max_msg_retries",type:"is-light","controls-position":"compact",placeholder:"2",min:"1",max:"1000"},model:{value:a.max_msg_retries,callback:function(l){e.$set(a,"max_msg_retries",l)},expression:"item.max_msg_retries"}})],1)],1),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.messengers.timeout"),"label-position":"on-border",message:e.$t("settings.messengers.timeoutHelp")}},[t("b-input",{attrs:{name:"timeout",placeholder:"5s",pattern:e.regDuration,maxlength:10},model:{value:a.timeout,callback:function(l){e.$set(a,"timeout",l)},expression:"item.timeout"}})],1)],1)]),t("hr")])])])}),0),t("b-button",{attrs:{"icon-left":"plus",type:"is-primary"},on:{click:e.addMessenger}},[e._v(" "+e._s(e.$t("globals.buttons.addNew"))+" ")])],1)},O=[],I=o(L,E,O);const M=I.exports,U=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form,regDuration:c}}});var j=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"items"},[t("b-field",{attrs:{label:e.$t("settings.performance.concurrency"),"label-position":"on-border",message:e.$t("settings.performance.concurrencyHelp")}},[t("b-numberinput",{attrs:{name:"app.concurrency",type:"is-light",placeholder:"5",min:"1",max:"10000"},model:{value:e.data["app.concurrency"],callback:function(a){e.$set(e.data,"app.concurrency",a)},expression:"data['app.concurrency']"}})],1),t("b-field",{attrs:{label:e.$t("settings.performance.messageRate"),"label-position":"on-border",message:e.$t("settings.performance.messageRateHelp")}},[t("b-numberinput",{attrs:{name:"app.message_rate",type:"is-light",placeholder:"5",min:"1",max:"100000"},model:{value:e.data["app.message_rate"],callback:function(a){e.$set(e.data,"app.message_rate",a)},expression:"data['app.message_rate']"}})],1),t("b-field",{attrs:{label:e.$t("settings.performance.batchSize"),"label-position":"on-border",message:e.$t("settings.performance.batchSizeHelp")}},[t("b-numberinput",{attrs:{name:"app.batch_size",type:"is-light",placeholder:"1000",min:"1",max:"100000"},model:{value:e.data["app.batch_size"],callback:function(a){e.$set(e.data,"app.batch_size",a)},expression:"data['app.batch_size']"}})],1),t("b-field",{attrs:{label:e.$t("settings.performance.maxErrThreshold"),"label-position":"on-border",message:e.$t("settings.performance.maxErrThresholdHelp")}},[t("b-numberinput",{attrs:{name:"app.max_send_errors",type:"is-light",placeholder:"1999",min:"0",max:"100000"},model:{value:e.data["app.max_send_errors"],callback:function(a){e.$set(e.data,"app.max_send_errors",a)},expression:"data['app.max_send_errors']"}})],1),t("div",[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.performance.slidingWindow"),message:e.$t("settings.performance.slidingWindowHelp")}},[t("b-switch",{attrs:{name:"app.message_sliding_window"},model:{value:e.data["app.message_sliding_window"],callback:function(a){e.$set(e.data,"app.message_sliding_window",a)},expression:"data['app.message_sliding_window']"}})],1)],1),t("div",{staticClass:"column is-3",class:{disabled:!e.data["app.message_sliding_window"]}},[t("b-field",{attrs:{label:e.$t("settings.performance.slidingWindowRate"),"label-position":"on-border",message:e.$t("settings.performance.slidingWindowRateHelp")}},[t("b-numberinput",{attrs:{name:"sliding_window_rate",type:"is-light","controls-position":"compact",disabled:!e.data["app.message_sliding_window"],placeholder:"25",min:"1",max:"10000000"},model:{value:e.data["app.message_sliding_window_rate"],callback:function(a){e.$set(e.data,"app.message_sliding_window_rate",a)},expression:"data['app.message_sliding_window_rate']"}})],1)],1),t("div",{staticClass:"column is-3",class:{disabled:!e.data["app.message_sliding_window"]}},[t("b-field",{attrs:{label:e.$t("settings.performance.slidingWindowDuration"),"label-position":"on-border",message:e.$t("settings.performance.slidingWindowDurationHelp")}},[t("b-input",{attrs:{name:"sliding_window_duration",disabled:!e.data["app.message_sliding_window"],placeholder:"1h",pattern:e.regDuration,maxlength:10},model:{value:e.data["app.message_sliding_window_duration"],callback:function(a){e.$set(e.data,"app.message_sliding_window_duration",a)},expression:"data['app.message_sliding_window_duration']"}})],1)],1)])]),t("div",[t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.performance.cacheSlowQueries"),message:e.$t("settings.performance.cacheSlowQueriesHelp")}},[t("b-switch",{attrs:{name:"app.cache_slow_queries"},model:{value:e.data["app.cache_slow_queries"],callback:function(a){e.$set(e.data,"app.cache_slow_queries",a)},expression:"data['app.cache_slow_queries']"}})],1)],1),t("div",{staticClass:"column is-4",class:{disabled:!e.data["app.cache_slow_queries"]}},[t("b-field",{attrs:{label:e.$t("settings.maintenance.cron")}},[t("b-input",{attrs:{disabled:!e.data["app.cache_slow_queries"],placeholder:"0 3 * * *"},model:{value:e.data["app.cache_slow_queries_interval"],callback:function(a){e.$set(e.data,"app.cache_slow_queries_interval",a)},expression:"data['app.cache_slow_queries_interval']"}})],1)],1),t("div",{staticClass:"column"},[t("br"),t("br"),t("a",{attrs:{href:"https://listmonk.app/docs/maintenance/performance/",target:"_blank",rel:"noopener noreferer"}},[t("b-icon",{attrs:{icon:"link-variant"}}),e._v(" "+e._s(e.$t("globals.buttons.learnMore"))+" ")],1)])])])],1)},q=[],A=o(U,j,q);const N=A.exports,z=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form,tab:0}},methods:{countItems(s){return s.split(`
`).filter(e=>e.trim()).length}},mounted(){this.tab=this.$utils.getPref("settings.privacyDomainTab")||0},computed:{numBlocked(){return this.countItems(this.form["privacy.domain_blocklist"])},numAllowed(){return this.countItems(this.form["privacy.domain_allowlist"])}},watch:{tab(s){this.$utils.setPref("settings.privacyDomainTab",s)}}});var F=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"items"},[t("b-field",{attrs:{label:e.$t("settings.privacy.individualSubTracking"),message:e.$t("settings.privacy.individualSubTrackingHelp")}},[t("b-switch",{attrs:{name:"privacy.individual_tracking"},model:{value:e.data["privacy.individual_tracking"],callback:function(a){e.$set(e.data,"privacy.individual_tracking",a)},expression:"data['privacy.individual_tracking']"}})],1),t("b-field",{attrs:{label:e.$t("settings.privacy.listUnsubHeader"),message:e.$t("settings.privacy.listUnsubHeaderHelp")}},[t("b-switch",{attrs:{name:"privacy.unsubscribe_header"},model:{value:e.data["privacy.unsubscribe_header"],callback:function(a){e.$set(e.data,"privacy.unsubscribe_header",a)},expression:"data['privacy.unsubscribe_header']"}})],1),t("b-field",{attrs:{label:e.$t("settings.privacy.allowBlocklist"),message:e.$t("settings.privacy.allowBlocklistHelp")}},[t("b-switch",{attrs:{name:"privacy.allow_blocklist"},model:{value:e.data["privacy.allow_blocklist"],callback:function(a){e.$set(e.data,"privacy.allow_blocklist",a)},expression:"data['privacy.allow_blocklist']"}})],1),t("b-field",{attrs:{label:e.$t("settings.privacy.allowPrefs"),message:e.$t("settings.privacy.allowPrefsHelp")}},[t("b-switch",{attrs:{name:"privacy.allow_blocklist"},model:{value:e.data["privacy.allow_preferences"],callback:function(a){e.$set(e.data,"privacy.allow_preferences",a)},expression:"data['privacy.allow_preferences']"}})],1),t("b-field",{attrs:{label:e.$t("settings.privacy.allowExport"),message:e.$t("settings.privacy.allowExportHelp")}},[t("b-switch",{attrs:{name:"privacy.allow_export"},model:{value:e.data["privacy.allow_export"],callback:function(a){e.$set(e.data,"privacy.allow_export",a)},expression:"data['privacy.allow_export']"}})],1),t("b-field",{attrs:{label:e.$t("settings.privacy.allowWipe"),message:e.$t("settings.privacy.allowWipeHelp")}},[t("b-switch",{attrs:{name:"privacy.allow_wipe"},model:{value:e.data["privacy.allow_wipe"],callback:function(a){e.$set(e.data,"privacy.allow_wipe",a)},expression:"data['privacy.allow_wipe']"}})],1),t("b-field",{attrs:{label:e.$t("settings.privacy.recordOptinIP"),message:e.$t("settings.privacy.recordOptinIPHelp")}},[t("b-switch",{attrs:{name:"privacy.record_optin_ip"},model:{value:e.data["privacy.record_optin_ip"],callback:function(a){e.$set(e.data,"privacy.record_optin_ip",a)},expression:"data['privacy.record_optin_ip']"}})],1),t("hr"),t("b-tabs",{attrs:{type:"is-boxed",animated:!1},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("b-tab-item",{attrs:{label:`${e.$t("settings.privacy.domainBlocklist")} (${e.numBlocked})`}},[t("b-field",{attrs:{message:e.$t("settings.privacy.domainBlocklistHelp")}},[t("b-input",{attrs:{type:"textarea",name:"privacy.domain_blocklist"},model:{value:e.data["privacy.domain_blocklist"],callback:function(a){e.$set(e.data,"privacy.domain_blocklist",a)},expression:"data['privacy.domain_blocklist']"}})],1)],1),t("b-tab-item",{attrs:{label:`${e.$t("settings.privacy.domainAllowlist")} (${e.numAllowed})`}},[t("b-field",{attrs:{message:e.$t("settings.privacy.domainAllowlistHelp")}},[t("b-input",{attrs:{type:"textarea",name:"privacy.domain_allowlist"},model:{value:e.data["privacy.domain_allowlist"],callback:function(a){e.$set(e.data,"privacy.domain_allowlist",a)},expression:"data['privacy.domain_allowlist']"}})],1)],1)],1)],1)},W=[],J=o(z,F,W);const B=J.exports,G={google:"https://accounts.google.com",github:"https://token.actions.githubusercontent.com",microsoft:"https://login.microsoftonline.com/{TENANT_HERE}/v2.0",apple:"https://appleid.apple.com"},K=n.extend({components:{CopyText:p},props:{form:{type:Object,default:()=>{}}},computed:{...r(["serverConfig","userRoles","listRoles"]),captchaEnabled:{get(){return this.data["security.captcha"].altcha.enabled||this.data["security.captcha"].hcaptcha.enabled},set(s){this.data["security.captcha"].altcha.enabled=!!s,this.data["security.captcha"].hcaptcha.enabled=!1}},selectedProvider:{get(){return this.data["security.captcha"].hcaptcha.enabled?"hcaptcha":"altcha"},set(s){this.data["security.captcha"].hcaptcha.enabled=s==="hcaptcha",this.data["security.captcha"].altcha.enabled=s==="altcha"}},version(){},isMobile(){return this.windowWidth<=768},isURLOk(){try{const s=new URL(this.serverConfig.root_url);return s.hostname!=="localhost"&&s.hostname!=="127.0.0.1"}catch{return!1}}},mounted(){this.$api.getUserRoles(),this.$api.getListRoles()},methods:{setProvider(s){this.$set(this.data["security.oidc"],"provider_url",G[s]),this.$set(this.data["security.oidc"],"provider_name",s.charAt(0).toUpperCase()+s.slice(1)),this.$nextTick(()=>{this.$refs.client_id.focus()})}},data(){return{data:this.form}}});var V=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"items"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.security.enableOIDC"),message:e.$t("settings.security.OIDCHelp")}},[t("b-switch",{attrs:{name:"security.oidc"},model:{value:e.data["security.oidc"].enabled,callback:function(a){e.$set(e.data["security.oidc"],"enabled",a)},expression:"data['security.oidc']['enabled']"}})],1)],1),t("div",{staticClass:"column is-9"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-7"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCURL"),"label-position":"on-border"}},[t("div",[t("b-input",{attrs:{name:"oidc.provider_url",placeholder:"https://login.yoursite.com",disabled:!e.data["security.oidc"].enabled,maxlength:300,required:"",type:"url",pattern:"https?://.*"},model:{value:e.data["security.oidc"].provider_url,callback:function(a){e.$set(e.data["security.oidc"],"provider_url",a)},expression:"data['security.oidc']['provider_url']"}}),t("div",{staticClass:"spaced-links is-size-7 mt-2",class:{disabled:!e.data["security.oidc"].enabled}},[t("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),(()=>e.setProvider("google")).apply(null,arguments)}}},[e._v("Google")]),t("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),(()=>e.setProvider("microsoft")).apply(null,arguments)}}},[e._v("Microsoft")]),t("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),(()=>e.setProvider("apple")).apply(null,arguments)}}},[e._v("Apple")])])],1)])],1),t("div",{staticClass:"column is-5"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCName"),"label-position":"on-border"}},[t("b-input",{ref:"provider_name",attrs:{name:"oidc.provider_name",disabled:!e.data["security.oidc"].enabled,maxlength:200},model:{value:e.data["security.oidc"].provider_name,callback:function(a){e.$set(e.data["security.oidc"],"provider_name",a)},expression:"data['security.oidc']['provider_name']"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCClientID"),"label-position":"on-border"}},[t("b-input",{ref:"client_id",attrs:{name:"oidc.client_id",disabled:!e.data["security.oidc"].enabled,maxlength:200,required:""},model:{value:e.data["security.oidc"].client_id,callback:function(a){e.$set(e.data["security.oidc"],"client_id",a)},expression:"data['security.oidc']['client_id']"}})],1)],1),t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCClientSecret"),"label-position":"on-border"}},[t("b-input",{attrs:{name:"oidc.client_secret",type:"password",disabled:!e.data["security.oidc"].enabled,maxlength:200,required:""},model:{value:e.data["security.oidc"].client_secret,callback:function(a){e.$set(e.data["security.oidc"],"client_secret",a)},expression:"data['security.oidc']['client_secret']"}})],1)],1)]),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCAutoCreateUsers"),message:e.$t("settings.security.OIDCAutoCreateUsersHelp")}},[t("b-switch",{attrs:{disabled:!e.data["security.oidc"].enabled,name:"oidc.auto_create_users"},model:{value:e.data["security.oidc"].auto_create_users,callback:function(a){e.$set(e.data["security.oidc"],"auto_create_users",a)},expression:"data['security.oidc']['auto_create_users']"}})],1)],1),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCDefaultUserRole"),"label-position":"on-border",message:e.$t("settings.security.OIDCDefaultRoleHelp")}},[t("b-select",{attrs:{disabled:!e.data["security.oidc"].enabled||!e.data["security.oidc"].auto_create_users,name:"oidc.default_user_role_id",expanded:""},model:{value:e.data["security.oidc"].default_user_role_id,callback:function(a){e.$set(e.data["security.oidc"],"default_user_role_id",a)},expression:"data['security.oidc']['default_user_role_id']"}},e._l(e.userRoles,function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}),0)],1)],1),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.security.OIDCDefaultListRole"),"label-position":"on-border",message:e.$t("settings.security.OIDCDefaultRoleHelp")}},[t("b-select",{attrs:{disabled:!e.data["security.oidc"].enabled||!e.data["security.oidc"].auto_create_users,name:"oidc.default_list_role_id",expanded:""},model:{value:e.data["security.oidc"].default_list_role_id,callback:function(a){e.$set(e.data["security.oidc"],"default_list_role_id",a)},expression:"data['security.oidc']['default_list_role_id']"}},[t("option",{domProps:{value:null}},[e._v("â€” "+e._s(e.$t("globals.terms.none"))+" â€”")]),e._l(e.listRoles,function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])})],2)],1)],1)]),t("hr"),t("b-field",{attrs:{label:e.$t("settings.security.OIDCRedirectURL")}},[t("code",[t("copy-text",{attrs:{text:`${e.serverConfig.root_url}/auth/oidc`}})],1)]),e.data["security.oidc"].enabled&&!e.isURLOk?t("p",{staticClass:"has-text-danger"},[t("b-icon",{attrs:{icon:"warning-empty"}}),e._v(" "+e._s(e.$t("settings.security.OIDCRedirectWarning"))+" ")],1):e._e()],1)]),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.security.enableCaptcha"),message:e.$t("settings.security.enableCaptchaHelp")}},[t("b-switch",{attrs:{name:"security.captcha"},model:{value:e.captchaEnabled,callback:function(a){e.captchaEnabled=a},expression:"captchaEnabled"}})],1)],1),e.captchaEnabled?t("div",{staticClass:"column is-9"},[t("b-field",{attrs:{label:e.$t("settings.security.captchaProvider")}},[t("b-radio",{attrs:{"native-value":"altcha",name:"captcha_provider"},model:{value:e.selectedProvider,callback:function(a){e.selectedProvider=a},expression:"selectedProvider"}},[e._v(" ALTCHA ")]),t("b-radio",{attrs:{"native-value":"hcaptcha",name:"captcha_provider"},model:{value:e.selectedProvider,callback:function(a){e.selectedProvider=a},expression:"selectedProvider"}},[e._v(" hCaptcha (deprecated) ")])],1),e.selectedProvider==="altcha"?t("div",[t("b-field",{attrs:{label:e.$t("settings.security.altchaComplexity"),"label-position":"on-border",message:e.$t("settings.security.altchaComplexityHelp")}},[t("b-input",{attrs:{name:"altcha_complexity",type:"number",min:"1000",max:"1000000",required:""},model:{value:e.data["security.captcha"].altcha.complexity,callback:function(a){e.$set(e.data["security.captcha"].altcha,"complexity",e._n(a))},expression:"data['security.captcha']['altcha']['complexity']"}})],1)],1):e._e(),e.selectedProvider==="hcaptcha"?t("div",[t("b-field",{attrs:{label:e.$t("settings.security.captchaKey"),"label-position":"on-border",message:e.$t("settings.security.captchaKeyHelp")}},[t("b-input",{attrs:{name:"hcaptcha_key",maxlength:200,required:""},model:{value:e.data["security.captcha"].hcaptcha.key,callback:function(a){e.$set(e.data["security.captcha"].hcaptcha,"key",a)},expression:"data['security.captcha']['hcaptcha']['key']"}})],1),t("b-field",{attrs:{label:e.$t("settings.security.captchaSecret"),"label-position":"on-border"}},[t("b-input",{attrs:{name:"hcaptcha_secret",type:"password",maxlength:200,required:""},model:{value:e.data["security.captcha"].hcaptcha.secret,callback:function(a){e.$set(e.data["security.captcha"].hcaptcha,"secret",a)},expression:"data['security.captcha']['hcaptcha']['secret']"}})],1)],1):e._e()],1):e._e()])])},Q=[],X=o(K,V,Q);const Y=X.exports,Z={gmail:{host:"smtp.gmail.com",port:465,auth_protocol:"login",tls_type:"TLS"},ses:{host:"email-smtp.YOUR-REGION.amazonaws.com",port:465,auth_protocol:"login",tls_type:"TLS"},mailjet:{host:"in-v3.mailjet.com",port:465,auth_protocol:"cram",tls_type:"TLS"},mailgun:{host:"smtp.mailgun.org",port:465,auth_protocol:"login",tls_type:"TLS"},sendgrid:{host:"smtp.sendgrid.net",port:465,auth_protocol:"login",tls_type:"TLS"},forwardemail:{host:"smtp.forwardemail.net",port:465,auth_protocol:"login",tls_type:"TLS"},postmark:{host:"smtp.postmarkapp.com",port:587,auth_protocol:"cram",tls_type:"STARTTLS"}},ee=n.extend({props:{form:{type:Object,default:()=>{}}},data(){return{data:this.form,regDuration:c,smtpTestItem:null,testEmail:"",errMsg:""}},methods:{addSMTP(){this.data.smtp.push({name:"",enabled:!0,host:"",hello_hostname:"",port:587,auth_protocol:"none",username:"",password:"",email_headers:[],max_conns:10,max_msg_retries:2,idle_timeout:"15s",wait_timeout:"5s",tls_type:"STARTTLS",tls_skip_verify:!1}),this.$nextTick(()=>{const s=document.querySelectorAll('.mail-servers input[name="host"]');s[s.length-1].focus()})},removeSMTP(s){this.data.smtp.splice(s,1)},showSMTPHeaders(s){const e=this.data.smtp[s];e.showHeaders=!0,this.data.smtp.splice(s,1,e)},testConnection(){let s=this.settings["app.from_email"].replace(">","").split("<");s.length>1&&(s=`<${s[s.length-1]}>`)},doSMTPTest(s,e){if(!this.isTestEnabled(s)){this.$utils.toast(this.$t("settings.smtp.testEnterEmail"),"is-danger"),this.$nextTick(()=>{const t=document.querySelector(`.password-${e}`);this.data.smtp[e].password="",t.focus(),t.select()});return}this.errMsg="",this.$api.testSMTP({...s,email:this.testEmail}).then(()=>{this.$utils.toast(this.$t("campaigns.testSent"))}).catch(t=>{var a,i;(i=(a=t.response)==null?void 0:a.data)!=null&&i.message&&(this.errMsg=t.response.data.message)})},showTestForm(s){this.smtpTestItem=s,this.testItem=this.form.smtp[s],this.errMsg="",this.$nextTick(()=>{document.querySelector(`.test-email-${s}`).focus()})},isTestEnabled(s){return!(!s.host||!s.port||s.auth_protocol!=="none"&&s.password.includes("â€¢"))},fillSettings(s,e){this.data.smtp.splice(s,1,{...this.data.smtp[s],...Z[e],username:"",password:"",hello_hostname:"",tls_skip_verify:!1}),this.$nextTick(()=>{document.querySelector(`.smtp-username-${s}`).focus()})}},computed:{...r(["settings"])}});var te=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("div",{staticClass:"items mail-servers"},e._l(e.form.smtp,function(a,i){return t("div",{key:i,staticClass:"block box"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-2"},[t("b-field",{attrs:{label:e.$t("globals.buttons.enabled")}},[t("b-switch",{attrs:{name:"enabled","native-value":!0,"data-cy":"btn-enable-smtp"},model:{value:a.enabled,callback:function(l){e.$set(a,"enabled",l)},expression:"item.enabled"}})],1),e.form.smtp.length>1?t("b-field",[t("a",{attrs:{href:"#","data-cy":"btn-delete-smtp"},on:{click:function(l){l.preventDefault(),e.$utils.confirm(null,()=>e.removeSMTP(i))}}},[t("b-icon",{attrs:{icon:"trash-can-outline"}}),e._v(" "+e._s(e.$t("globals.buttons.delete"))+" ")],1)]):e._e()],1),t("div",{staticClass:"column",class:{disabled:!a.enabled}},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-9"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.host"),"label-position":"on-border",message:e.$t("settings.mailserver.hostHelp")}},[t("b-input",{attrs:{name:"host",placeholder:"smtp.yourmailserver.net",maxlength:200},model:{value:a.host,callback:function(l){e.$set(a,"host",l)},expression:"item.host"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.port"),"label-position":"on-border",message:e.$t("settings.mailserver.portHelp")}},[t("b-numberinput",{attrs:{name:"port",type:"is-light","controls-position":"compact",placeholder:"25",min:"1",max:"65535"},model:{value:a.port,callback:function(l){e.$set(a,"port",l)},expression:"item.port"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-2"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.authProtocol"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"auth_protocol"},model:{value:a.auth_protocol,callback:function(l){e.$set(a,"auth_protocol",l)},expression:"item.auth_protocol"}},[t("option",{attrs:{value:"login"}},[e._v(" LOGIN ")]),t("option",{attrs:{value:"cram"}},[e._v(" CRAM ")]),t("option",{attrs:{value:"plain"}},[e._v(" PLAIN ")]),t("option",{attrs:{value:"none"}},[e._v(" None ")])])],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.mailserver.username"),"label-position":"on-border",expanded:""}},[t("b-input",{attrs:{"custom-class":`smtp-username-${i}`,disabled:a.auth_protocol==="none",name:"username",placeholder:"mysmtp",maxlength:200},model:{value:a.username,callback:function(l){e.$set(a,"username",l)},expression:"item.username"}})],1),t("b-field",{attrs:{label:e.$t("settings.mailserver.password"),"label-position":"on-border",expanded:"",message:e.$t("settings.mailserver.passwordHelp")}},[t("b-input",{attrs:{disabled:a.auth_protocol==="none",name:"password",type:"password","custom-class":`password-${i}`,placeholder:e.$t("settings.mailserver.passwordHelp"),maxlength:200},model:{value:a.password,callback:function(l){e.$set(a,"password",l)},expression:"item.password"}})],1)],1)],1)]),t("div",{staticClass:"spaced-links is-size-7"},[t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"gmail")).apply(null,arguments)}}},[e._v("Gmail")]),t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"ses")).apply(null,arguments)}}},[e._v("Amazon SES")]),t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"mailgun")).apply(null,arguments)}}},[e._v("Mailgun")]),t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"mailjet")).apply(null,arguments)}}},[e._v("Mailjet")]),t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"sendgrid")).apply(null,arguments)}}},[e._v("Sendgrid")]),t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"postmark")).apply(null,arguments)}}},[e._v("Postmark")]),t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.fillSettings(i,"forwardemail")).apply(null,arguments)}}},[e._v("Forward Email")])]),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("settings.smtp.heloHost"),"label-position":"on-border",message:e.$t("settings.smtp.heloHostHelp")}},[t("b-input",{attrs:{name:"hello_hostname",placeholder:"",maxlength:200},model:{value:a.hello_hostname,callback:function(l){e.$set(a,"hello_hostname",l)},expression:"item.hello_hostname"}})],1)],1),t("div",{staticClass:"column"},[t("b-field",{attrs:{grouped:""}},[t("b-field",{attrs:{label:e.$t("settings.mailserver.tls"),expanded:"",message:e.$t("settings.mailserver.tlsHelp"),"label-position":"on-border"}},[t("b-select",{attrs:{name:"items.tls_type"},model:{value:a.tls_type,callback:function(l){e.$set(a,"tls_type",l)},expression:"item.tls_type"}},[t("option",{attrs:{value:"none"}},[e._v(" "+e._s(e.$t("globals.states.off"))+" ")]),t("option",{attrs:{value:"STARTTLS"}},[e._v(" STARTTLS ")]),t("option",{attrs:{value:"TLS"}},[e._v(" SSL/TLS ")])])],1),t("b-field",{attrs:{label:e.$t("settings.mailserver.skipTLS"),expanded:"",message:e.$t("settings.mailserver.skipTLSHelp")}},[t("b-switch",{attrs:{disabled:a.tls_type==="none",name:"item.tls_skip_verify"},model:{value:a.tls_skip_verify,callback:function(l){e.$set(a,"tls_skip_verify",l)},expression:"item.tls_skip_verify"}})],1)],1)],1)]),t("hr"),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.maxConns"),"label-position":"on-border",message:e.$t("settings.mailserver.maxConnsHelp")}},[t("b-numberinput",{attrs:{name:"max_conns",type:"is-light","controls-position":"compact",placeholder:"25",min:"1",max:"65535"},model:{value:a.max_conns,callback:function(l){e.$set(a,"max_conns",l)},expression:"item.max_conns"}})],1)],1),t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.smtp.retries"),"label-position":"on-border",message:e.$t("settings.smtp.retriesHelp")}},[t("b-numberinput",{attrs:{name:"max_msg_retries",type:"is-light","controls-position":"compact",placeholder:"2",min:"1",max:"1000"},model:{value:a.max_msg_retries,callback:function(l){e.$set(a,"max_msg_retries",l)},expression:"item.max_msg_retries"}})],1)],1),t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.idleTimeout"),"label-position":"on-border",message:e.$t("settings.mailserver.idleTimeoutHelp")}},[t("b-input",{attrs:{name:"idle_timeout",placeholder:"15s",pattern:e.regDuration,maxlength:10},model:{value:a.idle_timeout,callback:function(l){e.$set(a,"idle_timeout",l)},expression:"item.idle_timeout"}})],1)],1),t("div",{staticClass:"column is-3"},[t("b-field",{attrs:{label:e.$t("settings.mailserver.waitTimeout"),"label-position":"on-border",message:e.$t("settings.mailserver.waitTimeoutHelp")}},[t("b-input",{attrs:{name:"wait_timeout",placeholder:"5s",pattern:e.regDuration,maxlength:10},model:{value:a.wait_timeout,callback:function(l){e.$set(a,"wait_timeout",l)},expression:"item.wait_timeout"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("b-field",{attrs:{label:e.$t("globals.fields.name"),"label-position":"on-border",message:e.$t("settings.mailserver.nameHelp")}},[t("b-input",{attrs:{name:"name",placeholder:"email-primary",maxlength:100},model:{value:a.name,callback:function(l){e.$set(a,"name",l)},expression:"item.name"}})],1)],1)]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column"},[a.email_headers.length===0&&!a.showHeaders?t("p",[t("a",{attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),(()=>e.showSMTPHeaders(i)).apply(null,arguments)}}},[t("b-icon",{attrs:{icon:"plus"}}),e._v(e._s(e.$t("settings.smtp.setCustomHeaders")))],1)]):e._e(),a.email_headers.length>0||a.showHeaders?t("b-field",{attrs:{"label-position":"on-border",message:e.$t("settings.smtp.customHeadersHelp")}},[t("b-input",{attrs:{name:"email_headers",type:"textarea",placeholder:'[{"X-Custom": "value"}, {"X-Custom2": "value"}]'},model:{value:a.strEmailHeaders,callback:function(l){e.$set(a,"strEmailHeaders",l)},expression:"item.strEmailHeaders"}})],1):e._e()],1)]),t("hr"),t("form",{on:{submit:function(l){return l.preventDefault(),(()=>e.doSMTPTest(a,i)).apply(null,arguments)}}},[t("div",{staticClass:"columns"},[e.smtpTestItem===i?[t("div",{staticClass:"column is-5"},[t("strong",[e._v(e._s(e.$t("settings.general.fromEmail")))]),t("br"),e._v(" "+e._s(e.settings["app.from_email"])+" ")]),t("div",{staticClass:"column is-4"},[t("b-field",{attrs:{label:e.$t("settings.smtp.toEmail"),"label-position":"on-border"}},[t("b-input",{ref:"testEmailTo",refInFor:!0,attrs:{type:"email",required:"",placeholder:"email@site.com","custom-class":`test-email-${i}`},model:{value:e.testEmail,callback:function(l){e.testEmail=l},expression:"testEmail"}})],1)],1)]:e._e(),t("div",{staticClass:"column has-text-right"},[e.smtpTestItem===i?t("b-button",{staticClass:"is-primary",on:{click:function(l){return l.preventDefault(),(()=>e.doSMTPTest(a,i)).apply(null,arguments)}}},[e._v(" "+e._s(e.$t("settings.smtp.sendTest"))+" ")]):t("a",{staticClass:"is-primary",attrs:{href:"#"},on:{click:function(l){return l.preventDefault(),e.showTestForm(i)}}},[t("b-icon",{attrs:{icon:"rocket-launch-outline"}}),e._v(" "+e._s(e.$t("settings.smtp.testConnection"))+" ")],1)],1),e._m(0,!0)],2),e.errMsg&&e.smtpTestItem===i?t("div",[t("b-field",{staticClass:"mt-4",attrs:{type:"is-danger"}},[t("b-input",{attrs:{type:"textarea","custom-class":"has-text-danger is-size-6",readonly:""},model:{value:e.errMsg,callback:function(l){e.errMsg=l},expression:"errMsg"}})],1)],1):e._e()])])])])}),0),t("b-button",{attrs:{"icon-left":"plus",type:"is-primary"},on:{click:e.addSMTP}},[e._v(" "+e._s(e.$t("globals.buttons.addNew"))+" ")])],1)},ae=[function(){var s=this,e=s._self._c;return s._self._setupProxy,e("div",{staticClass:"columns"},[e("div",{staticClass:"column"})])}],se=o(ee,te,ae);const le=se.exports,ie=n.extend({components:{GeneralSettings:S,PerformanceSettings:N,PrivacySettings:B,SecuritySettings:Y,MediaSettings:R,SmtpSettings:le,BounceSettings:$,MessengerSettings:M,AppearanceSettings:g},data(){return{key:0,isLoading:!1,formCopy:"",form:null,tab:0}},methods:{onSubmit(){var t,a;const s=JSON.parse(JSON.stringify(this.form));let e="";for(let i=0;i<s.smtp.length;i+=1)s.smtp[i].host=(t=s.smtp[i].host)==null?void 0:t.trim(),this.isDummy(s.smtp[i].password)?s.smtp[i].password="":this.hasDummy(s.smtp[i].password)&&(e=`smtp #${i+1}`),s.smtp[i].strEmailHeaders&&s.smtp[i].strEmailHeaders!=="[]"?s.smtp[i].email_headers=JSON.parse(s.smtp[i].strEmailHeaders):s.smtp[i].email_headers=[];for(let i=0;i<s["bounce.mailboxes"].length;i+=1)s["bounce.mailboxes"][i].host=(a=s["bounce.mailboxes"][i].host)==null?void 0:a.trim(),this.isDummy(s["bounce.mailboxes"][i].password)?s["bounce.mailboxes"][i].password="":this.hasDummy(s["bounce.mailboxes"][i].password)&&(e=`bounce #${i+1}`);this.isDummy(s["upload.s3.aws_secret_access_key"])?s["upload.s3.aws_secret_access_key"]="":this.hasDummy(s["upload.s3.aws_secret_access_key"])&&(e="s3"),this.isDummy(s["bounce.sendgrid_key"])?s["bounce.sendgrid_key"]="":this.hasDummy(s["bounce.sendgrid_key"])&&(e="sendgrid"),this.isDummy(s["security.captcha"].hcaptcha.secret)?s["security.captcha"].hcaptcha.secret="":this.hasDummy(s["security.captcha"].hcaptcha.secret)&&(e="captcha"),this.isDummy(s["security.oidc"].client_secret)?s["security.oidc"].client_secret="":this.hasDummy(s["security.oidc"].client_secret)&&(e="oidc"),this.isDummy(s["bounce.postmark"].password)?s["bounce.postmark"].password="":this.hasDummy(s["bounce.postmark"].password)&&(e="postmark"),this.isDummy(s["bounce.forwardemail"].key)?s["bounce.forwardemail"].key="":this.hasDummy(s["bounce.forwardemail"].key)&&(e="forwardemail");for(let i=0;i<s.messengers.length;i+=1)this.isDummy(s.messengers[i].password)?s.messengers[i].password="":this.hasDummy(s.messengers[i].password)&&(e=`messenger #${i+1}`);return e?(this.$utils.toast(this.$t("globals.messages.passwordChangeFull",{name:e}),"is-danger"),!1):(s["privacy.domain_blocklist"]=s["privacy.domain_blocklist"].split(`
`).map(i=>i.trim().toLowerCase()).filter(i=>i!==""),s["privacy.domain_allowlist"]=s["privacy.domain_allowlist"].split(`
`).map(i=>i.trim().toLowerCase()).filter(i=>i!==""),this.isLoading=!0,this.$api.updateSettings(s).then(i=>{if(typeof i=="object"&&i!==null&&i.needsRestart){this.$root.loadConfig(),this.getSettings(),this.isLoading=!1;return}this.$utils.toast(this.$t("settings.messengers.messageSaved"));const l=setInterval(()=>{this.$api.getHealth().then(()=>{clearInterval(l),this.$root.loadConfig(),this.getSettings()})},1e3)},()=>{this.isLoading=!1}),!1)},getSettings(){this.isLoading=!0,this.$api.getSettings().then(s=>{let e={};try{e=JSON.parse(JSON.stringify(s))}catch{return}for(let t=0;t<e.smtp.length;t+=1)e.smtp[t].strEmailHeaders=JSON.stringify(e.smtp[t].email_headers,null,4);e["privacy.domain_blocklist"]=e["privacy.domain_blocklist"].join(`
`),e["privacy.domain_allowlist"]=e["privacy.domain_allowlist"].join(`
`),this.key+=1,this.form=e,this.formCopy=JSON.stringify(e),this.$nextTick(()=>{this.isLoading=!1})})},isDummy(s){return!s||(s.match(/â€¢/g)||[]).length===s.length},hasDummy(s){return s.includes("â€¢")}},computed:{...r(["serverConfig","loading"]),hasFormChanged(){return this.formCopy?JSON.stringify(this.form)!==this.formCopy:!1}},beforeRouteLeave(s,e,t){if(this.hasFormChanged){this.$utils.confirm(this.$t("globals.messages.confirmDiscard"),()=>t(!0));return}t(!0)},mounted(){this.tab=this.$utils.getPref("settings.tab")||0,this.getSettings()},watch:{tab(s){this.$utils.setPref("settings.tab",s)}}});var ne=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("form",{on:{submit:function(a){return a.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("section",{staticClass:"settings"},[e.loading.settings||e.isLoading?t("b-loading",{attrs:{"is-full-page":!0,active:""}}):e._e(),t("header",{staticClass:"columns page-header"},[t("div",{staticClass:"column is-half"},[t("h1",{staticClass:"title is-4"},[e._v(" "+e._s(e.$t("settings.title"))+" "),t("span",{staticClass:"has-text-grey-light"},[e._v("("+e._s(e.serverConfig.version)+")")])])]),t("div",{staticClass:"column has-text-right"},[e.$can("settings:manage")?t("b-field",{attrs:{expanded:""}},[t("b-button",{staticClass:"isSaveEnabled",attrs:{expanded:"",disabled:!e.hasFormChanged,type:"is-primary","icon-left":"content-save-outline","native-type":"submit","data-cy":"btn-save"}},[e._v(" "+e._s(e.$t("globals.buttons.save"))+" ")])],1):e._e()],1)]),t("hr"),e.form?t("section",{staticClass:"wrap"},[t("b-tabs",{attrs:{type:"is-boxed",animated:!1},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("b-tab-item",{attrs:{label:e.$t("settings.general.name"),"label-position":"on-border"}},[t("general-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.performance.name")}},[t("performance-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.privacy.name")}},[t("privacy-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.security.name")}},[t("security-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.media.title")}},[t("media-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.smtp.name")}},[t("smtp-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.bounces.name")}},[t("bounce-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.messengers.name")}},[t("messenger-settings",{key:e.key,attrs:{form:e.form}})],1),t("b-tab-item",{attrs:{label:e.$t("settings.appearance.name")}},[t("appearance-settings",{key:e.key,attrs:{form:e.form}})],1)],1)],1):e._e()],1)])},oe=[],re=o(ie,ne,oe);const ue=re.exports;export{ue as default};
