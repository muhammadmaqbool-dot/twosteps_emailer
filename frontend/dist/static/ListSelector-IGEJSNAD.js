import{n as l,V as r}from"./index-BCeMOe0T.js";const a={name:"ListSelector",props:{label:{type:String,default:""},placeholder:{type:String,default:""},message:{type:String,default:""},required:Boolean,disabled:Boolean,classes:{type:Array,default:()=>[]},selected:{type:Array,default:()=>[]},all:{type:Array,default:()=>[]}},data(){return{query:"",selectedItems:[]}},methods:{selectList(i){i&&(this.selectedItems.push(i),this.query="",r.nextTick(()=>{this.$emit("input",this.selectedItems)}))},removeList(i){this.selectedItems=this.selectedItems.filter(e=>e.id!==i),r.nextTick(()=>{this.$emit("input",this.selectedItems)})}},computed:{filteredLists(){const i=this.selectedItems.reduce((t,s)=>({...t,[s.id]:!0}),{}),e=this.query.toLowerCase();return this.$props.all.filter(t=>!(t.id in i)&&t.name.toLowerCase().indexOf(e)>=0)}},watch:{selected(){this.selectedItems=JSON.parse(JSON.stringify(this.selected))}},mounted(){this.selected&&(this.selectedItems=JSON.parse(JSON.stringify(this.selected)))}};var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"field list-selector"},[t("div",{class:["list-tags",...e.classes]},[t("b-taglist",e._l(e.selectedItems,function(s){return t("b-tag",{key:s.id,staticClass:"list",class:s.subscriptionStatus,attrs:{closable:!e.$props.disabled,"data-id":s.id},on:{close:function(n){return e.removeList(s.id)}}},[e._v(" "+e._s(s.name)+" "),s.optin==="double"&&s.subscriptionStatus?t("sup",[e._v(" "+e._s(e.$t(`subscribers.status.${s.subscriptionStatus}`))+" ")]):e._e()])}),1)],1),t("b-field",{attrs:{message:e.message,label:e.label+(e.selectedItems?` (${e.selectedItems.length})`:""),"label-position":"on-border"}},[t("b-autocomplete",{attrs:{placeholder:e.placeholder,clearable:"","dropdown-position":"top",disabled:e.all.length===0||e.$props.disabled,"keep-first":!0,"clear-on-select":!0,"open-on-focus":!0,data:e.filteredLists,field:"name"},on:{select:e.selectList},model:{value:e.query,callback:function(s){e.query=s},expression:"query"}})],1)],1)},c=[],d=l(a,o,c);const p=d.exports;export{p as L};
