import{V as c,d as e,c as n,m as r,n as o}from"./index-BCeMOe0T.js";import{C as u}from"./Chart-TdIHOiDc.js";const d=c.extend({components:{Chart:u},data(){return{isChartsLoading:!0,isCountsLoading:!0,campaignViews:null,campaignClicks:null,counts:{lists:{},subscribers:{},campaigns:{},messages:0}}},methods:{makeChart(i){return i.length===0?{}:{labels:i.map(s=>e(s.date).format("DD MMM")),datasets:[{data:[...i.map(s=>s.count)],borderColor:n.primary,borderWidth:2,pointHoverBorderWidth:5,pointBorderWidth:.5}]}}},computed:{...r(["settings"]),dayjs(){return e}},mounted(){this.$api.getDashboardCounts().then(i=>{this.counts=i,this.isCountsLoading=!1}),this.$api.getDashboardCharts().then(i=>{this.isChartsLoading=!1,this.campaignViews=this.makeChart(i.campaignViews),this.campaignClicks=this.makeChart(i.linkClicks)})}});var m=function(){var s=this,t=s._self._c;return s._self._setupProxy,t("section",{staticClass:"dashboard content"},[t("header",{staticClass:"columns"},[t("div",{staticClass:"column is-two-thirds"},[t("h1",{staticClass:"title is-5"},[s._v(" "+s._s(s.$utils.niceDate(new Date))+" ")])])]),t("section",{staticClass:"counts wrap"},[t("div",{staticClass:"tile is-ancestor"},[t("div",{staticClass:"tile is-vertical is-12"},[t("div",{staticClass:"tile"},[t("div",{staticClass:"tile is-parent is-vertical relative"},[s.isCountsLoading?t("b-loading",{attrs:{active:"","is-full-page":!1}}):s._e(),t("article",{staticClass:"tile is-child notification",attrs:{"data-cy":"lists"}},[t("div",{staticClass:"columns is-mobile"},[t("div",{staticClass:"column is-6"},[t("p",{staticClass:"title"},[t("b-icon",{attrs:{icon:"format-list-bulleted-square"}}),s._v(" "+s._s(s.$utils.niceNumber(s.counts.lists.total))+" ")],1),t("p",{staticClass:"is-size-6 has-text-grey"},[s._v(" "+s._s(s.$tc("globals.terms.list",s.counts.lists.total))+" ")])]),t("div",{staticClass:"column is-6"},[t("ul",{staticClass:"no has-text-grey"},[t("li",[t("label",{attrs:{for:"#"}},[s._v(s._s(s.$utils.niceNumber(s.counts.lists.public)))]),s._v(" "+s._s(s.$t("lists.types.public"))+" ")]),t("li",[t("label",{attrs:{for:"#"}},[s._v(s._s(s.$utils.niceNumber(s.counts.lists.private)))]),s._v(" "+s._s(s.$t("lists.types.private"))+" ")]),t("li",[t("label",{attrs:{for:"#"}},[s._v(s._s(s.$utils.niceNumber(s.counts.lists.optinSingle)))]),s._v(" "+s._s(s.$t("lists.optins.single"))+" ")]),t("li",[t("label",{attrs:{for:"#"}},[s._v(s._s(s.$utils.niceNumber(s.counts.lists.optinDouble)))]),s._v(" "+s._s(s.$t("lists.optins.double"))+" ")])])])])]),t("article",{staticClass:"tile is-child notification",attrs:{"data-cy":"campaigns"}},[t("div",{staticClass:"columns is-mobile"},[t("div",{staticClass:"column is-6"},[t("p",{staticClass:"title"},[t("b-icon",{attrs:{icon:"rocket-launch-outline"}}),s._v(" "+s._s(s.$utils.niceNumber(s.counts.campaigns.total))+" ")],1),t("p",{staticClass:"is-size-6 has-text-grey"},[s._v(" "+s._s(s.$tc("globals.terms.campaign",s.counts.campaigns.total))+" ")])]),t("div",{staticClass:"column is-6"},[t("ul",{staticClass:"no has-text-grey"},s._l(s.counts.campaigns.byStatus,function(l,a){return t("li",{key:a},[t("label",{attrs:{for:"#","data-cy":`campaigns-${a}`}},[s._v(s._s(l))]),s._v(" "+s._s(s.$t(`campaigns.status.${a}`))+" "),a==="running"?t("span",{staticClass:"spinner is-tiny"},[t("b-loading",{attrs:{"is-full-page":!1,active:""}})],1):s._e()])}),0)])])])],1),t("div",{staticClass:"tile is-parent relative"},[s.isCountsLoading?t("b-loading",{attrs:{active:"","is-full-page":!1}}):s._e(),t("article",{staticClass:"tile is-child notification",attrs:{"data-cy":"subscribers"}},[t("div",{staticClass:"columns is-mobile"},[t("div",{staticClass:"column is-6"},[t("p",{staticClass:"title"},[t("b-icon",{attrs:{icon:"account-multiple"}}),s._v(" "+s._s(s.$utils.niceNumber(s.counts.subscribers.total))+" ")],1),t("p",{staticClass:"is-size-6 has-text-grey"},[s._v(" "+s._s(s.$tc("globals.terms.subscriber",s.counts.subscribers.total))+" ")])]),t("div",{staticClass:"column is-6"},[t("ul",{staticClass:"no has-text-grey"},[t("li",[t("label",{attrs:{for:"#"}},[s._v(s._s(s.$utils.niceNumber(s.counts.subscribers.blocklisted)))]),s._v(" "+s._s(s.$t("subscribers.status.blocklisted"))+" ")]),t("li",[t("label",{attrs:{for:"#"}},[s._v(s._s(s.$utils.niceNumber(s.counts.subscribers.orphans)))]),s._v(" "+s._s(s.$t("dashboard.orphanSubs"))+" ")])])])]),t("hr"),t("div",{staticClass:"columns",attrs:{"data-cy":"messages"}},[t("div",{staticClass:"column is-12"},[t("p",{staticClass:"title"},[t("b-icon",{attrs:{icon:"email-outline"}}),s._v(" "+s._s(s.$utils.niceNumber(s.counts.messages))+" ")],1),t("p",{staticClass:"is-size-6 has-text-grey"},[s._v(" "+s._s(s.$t("dashboard.messagesSent"))+" ")])])])])],1)]),t("div",{staticClass:"tile is-parent relative"},[s.isChartsLoading?t("b-loading",{attrs:{active:"","is-full-page":!1}}):s._e(),t("article",{staticClass:"tile is-child notification charts"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6"},[t("h3",{staticClass:"title is-size-6"},[s._v(" "+s._s(s.$t("dashboard.campaignViews"))+" ")]),t("br"),s.campaignViews?t("chart",{attrs:{type:"line",data:s.campaignViews}}):s._e()],1),t("div",{staticClass:"column is-6"},[t("h3",{staticClass:"title is-size-6 has-text-right"},[s._v(" "+s._s(s.$t("dashboard.linkClicks"))+" ")]),t("br"),s.campaignClicks?t("chart",{attrs:{type:"line",data:s.campaignClicks}}):s._e()],1)])])],1)])]),s.settings["app.cache_slow_queries"]?t("p",{staticClass:"has-text-grey"},[s._v(" *"+s._s(s.$t("globals.messages.slowQueriesCached"))+" "),t("a",{staticClass:"has-text-grey",attrs:{href:"https://listmonk.app/docs/maintenance/performance/",target:"_blank",rel:"noopener noreferer"}},[t("b-icon",{attrs:{icon:"link-variant"}}),s._v(" "+s._s(s.$t("globals.buttons.learnMore"))+" ")],1)]):s._e()])])},_=[],p=o(d,m,_);const v=p.exports;export{v as default};
