import{n as s,u as i}from"./index-BCeMOe0T.js";const r={name:"CampaignPreview",props:{isPost:{type:Boolean,default:!1},id:{type:Number,default:0},title:{type:String,default:""},type:{type:String,default:""},templateType:{type:String,default:""},archiveMeta:{type:String,default:null},body:{type:String,default:""},contentType:{type:String,default:""},templateId:{type:[Number,null],default:null},isArchive:{type:Boolean,default:!1}},data(){return{isVisible:!0,isLoading:!0}},methods:{close(){this.$emit("close"),this.isVisible=!1},onLoaded(a){a.srcElement.contentWindow.location.href!=="about:blank"&&(this.isLoading=!1)}},computed:{previewURL(){let a="about:blank";return this.type==="campaign"?a=this.isArchive?i.previewCampaignArchive:i.previewCampaign:this.type==="template"&&(this.id?a=i.previewTemplate:a=i.previewRawTemplate),a.replace(":id",this.id)}},mounted(){setTimeout(()=>{this.isPost&&this.$refs.form.submit()},100)}};var o=function(){var e=this,t=e._self._c;return t("div",[t("b-modal",{attrs:{scroll:"keep","aria-modal":!0,active:e.isVisible},on:{close:e.close}},[t("div",[t("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t("header",{staticClass:"modal-card-head"},[t("h4",[e._v(e._s(e.title))])])]),t("section",{staticClass:"modal-card-body preview",attrs:{expanded:""}},[t("b-loading",{attrs:{active:e.isLoading,"is-full-page":!1}}),e.isPost?t("form",{ref:"form",attrs:{method:"post",action:e.previewURL,target:"iframe"}},[e.templateId?t("input",{attrs:{type:"hidden",name:"template_id"},domProps:{value:e.templateId}}):e._e(),e.contentType?t("input",{attrs:{type:"hidden",name:"content_type"},domProps:{value:e.contentType}}):e._e(),e.templateType?t("input",{attrs:{type:"hidden",name:"template_type"},domProps:{value:e.templateType}}):e._e(),e.archiveMeta?t("input",{attrs:{type:"hidden",name:"archive_meta"},domProps:{value:e.archiveMeta}}):e._e(),e.body?t("input",{attrs:{type:"hidden",name:"body"},domProps:{value:e.body}}):e._e()]):e._e(),t("iframe",{ref:"iframe",attrs:{id:"iframe",name:"iframe",title:e.title,src:e.isPost?"about:blank":e.previewURL},on:{load:e.onLoaded}})],1),t("footer",{staticClass:"modal-card-foot has-text-right"},[t("b-button",{on:{click:e.close}},[e._v(" "+e._s(e.$t("globals.buttons.close"))+" ")])],1)])])],1)},l=[],n=s(r,o,l);const p=n.exports;export{p as C};
