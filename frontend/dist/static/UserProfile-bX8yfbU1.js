import{V as o,m as r,n as i}from"./index-BCeMOe0T.js";const n=o.extend({name:"UserProfile",data(){return{form:{},data:{}}},methods:{onSubmit(){const t={name:this.form.name,email:this.form.email};if(this.data.passwordLogin&&this.form.password){if(this.form.password!==this.form.password2){this.$utils.toast(this.$t("users.passwordMismatch"),"is-danger");return}t.password=this.form.password,t.password2=this.form.password2}this.$api.updateUserProfile(t).then(()=>{this.form.password="",this.form.password2="",this.$utils.toast(this.$t("globals.messages.updated",{name:this.data.username}))})}},mounted(){this.$api.getUserProfile().then(t=>{this.data={...t},this.form={name:t.name,email:t.email}})},computed:{...r(["loading"])}});var l=function(){var s=this,a=s._self._c;return s._self._setupProxy,a("section",{staticClass:"user-profile section-mini"},[s.loading.users?a("b-loading",{attrs:{active:s.loading.users,"is-full-page":!1}}):s._e(),a("h1",{staticClass:"title"},[s._v(" @"+s._s(s.data.username)+" ")]),s.data.userRole?a("b-tag",[s._v(s._s(s.data.userRole.name))]):s._e(),a("br"),a("br"),a("br"),a("form",{on:{submit:function(e){return e.preventDefault(),s.onSubmit.apply(null,arguments)}}},[s.data.type!=="api"?a("b-field",{attrs:{label:s.$t("subscribers.email"),"label-position":"on-border"}},[a("b-input",{attrs:{maxlength:200,name:"email",placeholder:s.$t("subscribers.email"),disabled:!s.data.passwordLogin,required:"",autofocus:""},model:{value:s.form.email,callback:function(e){s.$set(s.form,"email",e)},expression:"form.email"}})],1):s._e(),a("b-field",{attrs:{label:s.$t("globals.fields.name"),"label-position":"on-border"}},[a("b-input",{attrs:{maxlength:200,name:"name",placeholder:s.$t("globals.fields.name")},model:{value:s.form.name,callback:function(e){s.$set(s.form,"name",e)},expression:"form.name"}})],1),s.data.passwordLogin?a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("b-field",{attrs:{label:s.$t("users.password"),"label-position":"on-border"}},[a("b-input",{attrs:{minlength:"8",maxlength:200,type:"password",name:"password",placeholder:s.$t("users.password")},model:{value:s.form.password,callback:function(e){s.$set(s.form,"password",e)},expression:"form.password"}})],1)],1),a("div",{staticClass:"column is-6"},[a("b-field",{attrs:{label:s.$t("users.passwordRepeat"),"label-position":"on-border"}},[a("b-input",{attrs:{minlength:"8",maxlength:200,type:"password",name:"password2"},model:{value:s.form.password2,callback:function(e){s.$set(s.form,"password2",e)},expression:"form.password2"}})],1)],1)]):s._e(),a("b-field",{attrs:{expanded:""}},[a("b-button",{attrs:{type:"is-primary","icon-left":"content-save-outline","native-type":"submit","data-cy":"btn-save"}},[s._v(" "+s._s(s.$t("globals.buttons.save"))+" ")])],1)],1)],1)},m=[],d=i(n,l,m);const u=d.exports;export{u as default};
